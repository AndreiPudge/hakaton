{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nimport { api } from \"../api/api\";\nclass ClientStore {\n  // объект выбранного клиента\n\n  constructor() {\n    this.list = [];\n    this.searchQuery = \"\";\n    this.loading = false;\n    this.error = null;\n    this.selectedClient = null;\n    makeAutoObservable(this, {}, {\n      autoBind: true\n    });\n  }\n  setSearchQuery(value) {\n    this.searchQuery = value;\n  }\n  async fetchClients() {\n    if (!this.searchQuery || this.searchQuery.trim() === \"\") {\n      this.list = [];\n      return;\n    }\n    this.loading = true;\n    this.error = null;\n    try {\n      const resp = await fetch(`/api/clients?search=${encodeURIComponent(this.searchQuery)}`);\n      if (!resp.ok) {\n        throw new Error(\"Ошибка загрузки клиентов\");\n      }\n      const data = await resp.json();\n      this.list = data;\n    } catch (err) {\n      this.error = err.message || \"Ошибка загрузки клиентов\";\n      this.list = [];\n    } finally {\n      this.loading = false;\n    }\n  }\n  selectClient(client) {\n    this.selectedClient = client;\n  }\n  clear() {\n    this.list = [];\n    this.selectedClient = null;\n    this.searchQuery = \"\";\n    this.error = null;\n  }\n}\nexport const clientStore = new ClientStore();","map":{"version":3,"names":["makeAutoObservable","api","ClientStore","constructor","list","searchQuery","loading","error","selectedClient","autoBind","setSearchQuery","value","fetchClients","trim","resp","fetch","encodeURIComponent","ok","Error","data","json","err","message","selectClient","client","clear","clientStore"],"sources":["C:/Users/Admin/OneDrive/Документы/GitHub/hakaton1/frontend/src/store/clientsStore.js"],"sourcesContent":["import {makeAutoObservable} from \"mobx\"\r\nimport { api } from \"../api/api\";\r\n\r\nclass ClientStore{\r\n    list=[]\r\n    searchQuery = \"\";\r\n    loading = false;\r\n    error = null;\r\n    selectedClient = null; // объект выбранного клиента\r\n\r\n    constructor() {\r\n        makeAutoObservable(this, {}, { autoBind: true });\r\n    }\r\n\r\n    setSearchQuery(value){\r\n        this.searchQuery = value;\r\n    }\r\n\r\n    async fetchClients(){\r\n        if (!this.searchQuery || this.searchQuery.trim() === \"\") {\r\n            this.list = [];\r\n            return;\r\n        }\r\n\r\n        this.loading = true;\r\n        this.error = null;\r\n\r\n        try {\r\n            const resp = await fetch(`/api/clients?search=${encodeURIComponent(this.searchQuery)}`)\r\n            if (!resp.ok) {\r\n                throw new Error(\"Ошибка загрузки клиентов\");\r\n            }\r\n            const data = await resp.json();\r\n            this.list = data;\r\n        }catch(err){\r\n            this.error = err.message || \"Ошибка загрузки клиентов\";\r\n            this.list = [];\r\n        }finally{\r\n            this.loading = false;\r\n        }\r\n    }\r\n\r\n  selectClient(client){\r\n    this.selectedClient = client;\r\n  }\r\n\r\n  clear() {\r\n    this.list = [];\r\n    this.selectedClient = null;\r\n    this.searchQuery = \"\";\r\n    this.error = null;\r\n  }\r\n}\r\nexport const clientStore = new ClientStore()"],"mappings":"AAAA,SAAQA,kBAAkB,QAAO,MAAM;AACvC,SAASC,GAAG,QAAQ,YAAY;AAEhC,MAAMC,WAAW;EAKU;;EAEvBC,WAAWA,CAAA,EAAG;IAAA,KANdC,IAAI,GAAC,EAAE;IAAA,KACPC,WAAW,GAAG,EAAE;IAAA,KAChBC,OAAO,GAAG,KAAK;IAAA,KACfC,KAAK,GAAG,IAAI;IAAA,KACZC,cAAc,GAAG,IAAI;IAGjBR,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;MAAES,QAAQ,EAAE;IAAK,CAAC,CAAC;EACpD;EAEAC,cAAcA,CAACC,KAAK,EAAC;IACjB,IAAI,CAACN,WAAW,GAAGM,KAAK;EAC5B;EAEA,MAAMC,YAAYA,CAAA,EAAE;IAChB,IAAI,CAAC,IAAI,CAACP,WAAW,IAAI,IAAI,CAACA,WAAW,CAACQ,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACrD,IAAI,CAACT,IAAI,GAAG,EAAE;MACd;IACJ;IAEA,IAAI,CAACE,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI;MACA,MAAMO,IAAI,GAAG,MAAMC,KAAK,CAAC,uBAAuBC,kBAAkB,CAAC,IAAI,CAACX,WAAW,CAAC,EAAE,CAAC;MACvF,IAAI,CAACS,IAAI,CAACG,EAAE,EAAE;QACV,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;MAC/C;MACA,MAAMC,IAAI,GAAG,MAAML,IAAI,CAACM,IAAI,CAAC,CAAC;MAC9B,IAAI,CAAChB,IAAI,GAAGe,IAAI;IACpB,CAAC,QAAME,GAAG,EAAC;MACP,IAAI,CAACd,KAAK,GAAGc,GAAG,CAACC,OAAO,IAAI,0BAA0B;MACtD,IAAI,CAAClB,IAAI,GAAG,EAAE;IAClB,CAAC,SAAO;MACJ,IAAI,CAACE,OAAO,GAAG,KAAK;IACxB;EACJ;EAEFiB,YAAYA,CAACC,MAAM,EAAC;IAClB,IAAI,CAAChB,cAAc,GAAGgB,MAAM;EAC9B;EAEAC,KAAKA,CAAA,EAAG;IACN,IAAI,CAACrB,IAAI,GAAG,EAAE;IACd,IAAI,CAACI,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACH,WAAW,GAAG,EAAE;IACrB,IAAI,CAACE,KAAK,GAAG,IAAI;EACnB;AACF;AACA,OAAO,MAAMmB,WAAW,GAAG,IAAIxB,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}