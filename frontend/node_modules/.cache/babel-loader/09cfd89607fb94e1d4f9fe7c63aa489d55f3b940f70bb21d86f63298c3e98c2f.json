{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass InsightsStore {\n  // список продуктов\n\n  constructor() {\n    this.loading = false;\n    this.error = null;\n    this.prediction = null;\n    // { predictedIncome, lowerBound, upperBound, confidence }\n    this.featureImportances = [];\n    // [{ name, value }]\n    this.textExplanation = \"\";\n    this.offers = [];\n    makeAutoObservable(this, {}, {\n      autoBind: true\n    });\n  }\n  async fetchInsights(clientId) {\n    if (!clientId) return;\n    this.loading = true;\n    this.error = null;\n    try {\n      const resp = await fetch(`/api/clients/${clientId}/insights`);\n      if (!resp.ok) {\n        throw new Error(\"Ошибка загрузки прогноза\");\n      }\n      const data = await resp.json();\n      this.prediction = data.prediction || null;\n      this.featureImportances = data.featureImportances || [];\n      this.textExplanation = data.textExplanation || \"\";\n      this.offers = data.offers || [];\n    } catch (err) {\n      this.error = err.message || \"Ошибка загрузки прогноза\";\n      this.prediction = null;\n      this.featureImportances = [];\n      this.textExplanation = \"\";\n      this.offers = [];\n    } finally {\n      this.loading = false;\n    }\n  }\n  clear() {\n    this.loading = false;\n    this.error = null;\n    this.prediction = null;\n    this.featureImportances = [];\n    this.textExplanation = \"\";\n    this.offers = [];\n  }\n}\nexport const insightsStore = new InsightsStore();","map":{"version":3,"names":["makeAutoObservable","InsightsStore","constructor","loading","error","prediction","featureImportances","textExplanation","offers","autoBind","fetchInsights","clientId","resp","fetch","ok","Error","data","json","err","message","clear","insightsStore"],"sources":["C:/Users/Admin/OneDrive/Desktop/раб стол/WebDev/alfa client/client/src/store/insightsStore.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\n\r\nclass InsightsStore {\r\n  loading = false;\r\n  error = null;\r\n  prediction = null;         // { predictedIncome, lowerBound, upperBound, confidence }\r\n  featureImportances = [];   // [{ name, value }]\r\n  textExplanation = \"\";\r\n  offers = [];               // список продуктов\r\n\r\n  constructor() {\r\n    makeAutoObservable(this, {}, { autoBind: true });\r\n  }\r\n\r\n  async fetchInsights(clientId) {\r\n    if (!clientId) return;\r\n\r\n    this.loading = true;\r\n    this.error = null;\r\n\r\n    try {\r\n      const resp = await fetch(`/api/clients/${clientId}/insights`);\r\n      if (!resp.ok) {\r\n        throw new Error(\"Ошибка загрузки прогноза\");\r\n      }\r\n      const data = await resp.json();\r\n\r\n      this.prediction = data.prediction || null;\r\n      this.featureImportances = data.featureImportances || [];\r\n      this.textExplanation = data.textExplanation || \"\";\r\n      this.offers = data.offers || [];\r\n    } catch (err) {\r\n      this.error = err.message || \"Ошибка загрузки прогноза\";\r\n      this.prediction = null;\r\n      this.featureImportances = [];\r\n      this.textExplanation = \"\";\r\n      this.offers = [];\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.loading = false;\r\n    this.error = null;\r\n    this.prediction = null;\r\n    this.featureImportances = [];\r\n    this.textExplanation = \"\";\r\n    this.offers = [];\r\n  }\r\n}\r\n\r\nexport const insightsStore = new InsightsStore();"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,MAAM;AAEzC,MAAMC,aAAa,CAAC;EAMS;;EAE3BC,WAAWA,CAAA,EAAG;IAAA,KAPdC,OAAO,GAAG,KAAK;IAAA,KACfC,KAAK,GAAG,IAAI;IAAA,KACZC,UAAU,GAAG,IAAI;IAAU;IAAA,KAC3BC,kBAAkB,GAAG,EAAE;IAAI;IAAA,KAC3BC,eAAe,GAAG,EAAE;IAAA,KACpBC,MAAM,GAAG,EAAE;IAGTR,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;MAAES,QAAQ,EAAE;IAAK,CAAC,CAAC;EAClD;EAEA,MAAMC,aAAaA,CAACC,QAAQ,EAAE;IAC5B,IAAI,CAACA,QAAQ,EAAE;IAEf,IAAI,CAACR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI;MACF,MAAMQ,IAAI,GAAG,MAAMC,KAAK,CAAC,gBAAgBF,QAAQ,WAAW,CAAC;MAC7D,IAAI,CAACC,IAAI,CAACE,EAAE,EAAE;QACZ,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;MAC7C;MACA,MAAMC,IAAI,GAAG,MAAMJ,IAAI,CAACK,IAAI,CAAC,CAAC;MAE9B,IAAI,CAACZ,UAAU,GAAGW,IAAI,CAACX,UAAU,IAAI,IAAI;MACzC,IAAI,CAACC,kBAAkB,GAAGU,IAAI,CAACV,kBAAkB,IAAI,EAAE;MACvD,IAAI,CAACC,eAAe,GAAGS,IAAI,CAACT,eAAe,IAAI,EAAE;MACjD,IAAI,CAACC,MAAM,GAAGQ,IAAI,CAACR,MAAM,IAAI,EAAE;IACjC,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZ,IAAI,CAACd,KAAK,GAAGc,GAAG,CAACC,OAAO,IAAI,0BAA0B;MACtD,IAAI,CAACd,UAAU,GAAG,IAAI;MACtB,IAAI,CAACC,kBAAkB,GAAG,EAAE;MAC5B,IAAI,CAACC,eAAe,GAAG,EAAE;MACzB,IAAI,CAACC,MAAM,GAAG,EAAE;IAClB,CAAC,SAAS;MACR,IAAI,CAACL,OAAO,GAAG,KAAK;IACtB;EACF;EAEAiB,KAAKA,CAAA,EAAG;IACN,IAAI,CAACjB,OAAO,GAAG,KAAK;IACpB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAACC,eAAe,GAAG,EAAE;IACzB,IAAI,CAACC,MAAM,GAAG,EAAE;EAClB;AACF;AAEA,OAAO,MAAMa,aAAa,GAAG,IAAIpB,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}