{"ast":null,"code":"// Базовый URL бэкенда (FastAPI/Flask и т.п.)\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"http://localhost:8000\";\n\n// Общая функция для запросов\nasync function apiRequest(path, options = {}) {\n  const url = `${API_BASE_URL}${path}`;\n  const defaultHeaders = {\n    \"Content-Type\": \"application/json\"\n  };\n  const response = await fetch(url, {\n    headers: {\n      ...defaultHeaders,\n      ...(options.headers || {})\n    },\n    ...options\n  });\n  if (!response.ok) {\n    // Пытаемся вытащить текст ошибки с бэка\n    let errorMessage = `API error: ${response.status} ${response.statusText}`;\n    try {\n      const errorData = await response.json();\n      if (errorData && errorData.detail) {\n        errorMessage = errorData.detail;\n      }\n    } catch (e) {\n      // ignore JSON parse error\n    }\n    throw new Error(errorMessage);\n  }\n\n  // Если тело пустое — вернём null\n  const text = await response.text();\n  if (!text) return null;\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    // на всякий случай, если бэк вернул не JSON\n    return text;\n  }\n}\n\n// -------------------- КЛИЕНТЫ --------------------\n\n// Получить список клиентов по поиску\n// GET /api/clients?search=...\nexport async function fetchClientsApi(searchQuery) {\n  const query = searchQuery ? searchQuery.trim() : \"\";\n  const path = `/api/clients?search=${encodeURIComponent(query)}`;\n  return apiRequest(path, {\n    method: \"GET\"\n  });\n}\n\n// -------------------- ИНСАЙТЫ ПО КЛИЕНТУ --------------------\n\n// Получить прогноз дохода, факторы и рекомендации\n// GET /api/clients/:id/insights\nexport async function fetchClientInsightsApi(clientId) {\n  const path = `/api/clients/${clientId}/insights`;\n  return apiRequest(path, {\n    method: \"GET\"\n  });\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_BASE_URL","apiRequest","path","options","url","defaultHeaders","response","fetch","headers","ok","errorMessage","status","statusText","errorData","json","detail","e","Error","text","JSON","parse","fetchClientsApi","searchQuery","query","trim","encodeURIComponent","method","fetchClientInsightsApi","clientId"],"sources":["C:/Users/Admin/OneDrive/Документы/GitHub/hakaton1/frontend/src/api/api.js"],"sourcesContent":["// Базовый URL бэкенда (FastAPI/Flask и т.п.)\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"http://localhost:8000\";\r\n\r\n// Общая функция для запросов\r\nasync function apiRequest(path, options = {}) {\r\n  const url =   `${API_BASE_URL}${path}`;\r\n\r\n  const defaultHeaders = {\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...(options.headers || {}),\r\n    },\r\n    ...options,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    // Пытаемся вытащить текст ошибки с бэка\r\n    let errorMessage = `API error: ${response.status} ${response.statusText}`;\r\n    try {\r\n      const errorData = await response.json();\r\n      if (errorData && errorData.detail) {\r\n        errorMessage = errorData.detail;\r\n      }\r\n    } catch (e) {\r\n      // ignore JSON parse error\r\n    }\r\n    throw new Error(errorMessage);\r\n  }\r\n\r\n  // Если тело пустое — вернём null\r\n  const text = await response.text();\r\n  if (!text) return null;\r\n\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {\r\n    // на всякий случай, если бэк вернул не JSON\r\n    return text;\r\n  }\r\n}\r\n\r\n// -------------------- КЛИЕНТЫ --------------------\r\n\r\n// Получить список клиентов по поиску\r\n// GET /api/clients?search=...\r\nexport async function fetchClientsApi(searchQuery) {\r\n  const query = searchQuery ? searchQuery.trim() : \"\";\r\n  const path = `/api/clients?search=${encodeURIComponent(query)}`;\r\n  return apiRequest(path, {\r\n    method: \"GET\",\r\n  });\r\n}\r\n\r\n// -------------------- ИНСАЙТЫ ПО КЛИЕНТУ --------------------\r\n\r\n// Получить прогноз дохода, факторы и рекомендации\r\n// GET /api/clients/:id/insights\r\nexport async function fetchClientInsightsApi(clientId) {\r\n  const path = `/api/clients/${clientId}/insights`;\r\n  return apiRequest(path, {\r\n    method: \"GET\",\r\n  });\r\n}"],"mappings":"AAAA;AACA,MAAMA,YAAY,GAChBC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB;;AAE/D;AACA,eAAeC,UAAUA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAC5C,MAAMC,GAAG,GAAK,GAAGP,YAAY,GAAGK,IAAI,EAAE;EAEtC,MAAMG,cAAc,GAAG;IACrB,cAAc,EAAE;EAClB,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;IAChCI,OAAO,EAAE;MACP,GAAGH,cAAc;MACjB,IAAIF,OAAO,CAACK,OAAO,IAAI,CAAC,CAAC;IAC3B,CAAC;IACD,GAAGL;EACL,CAAC,CAAC;EAEF,IAAI,CAACG,QAAQ,CAACG,EAAE,EAAE;IAChB;IACA,IAAIC,YAAY,GAAG,cAAcJ,QAAQ,CAACK,MAAM,IAAIL,QAAQ,CAACM,UAAU,EAAE;IACzE,IAAI;MACF,MAAMC,SAAS,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MACvC,IAAID,SAAS,IAAIA,SAAS,CAACE,MAAM,EAAE;QACjCL,YAAY,GAAGG,SAAS,CAACE,MAAM;MACjC;IACF,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV;IAAA;IAEF,MAAM,IAAIC,KAAK,CAACP,YAAY,CAAC;EAC/B;;EAEA;EACA,MAAMQ,IAAI,GAAG,MAAMZ,QAAQ,CAACY,IAAI,CAAC,CAAC;EAClC,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EAEtB,IAAI;IACF,OAAOC,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC;EACzB,CAAC,CAAC,OAAOF,CAAC,EAAE;IACV;IACA,OAAOE,IAAI;EACb;AACF;;AAEA;;AAEA;AACA;AACA,OAAO,eAAeG,eAAeA,CAACC,WAAW,EAAE;EACjD,MAAMC,KAAK,GAAGD,WAAW,GAAGA,WAAW,CAACE,IAAI,CAAC,CAAC,GAAG,EAAE;EACnD,MAAMtB,IAAI,GAAG,uBAAuBuB,kBAAkB,CAACF,KAAK,CAAC,EAAE;EAC/D,OAAOtB,UAAU,CAACC,IAAI,EAAE;IACtBwB,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;;AAEA;AACA;AACA,OAAO,eAAeC,sBAAsBA,CAACC,QAAQ,EAAE;EACrD,MAAM1B,IAAI,GAAG,gBAAgB0B,QAAQ,WAAW;EAChD,OAAO3B,UAAU,CAACC,IAAI,EAAE;IACtBwB,MAAM,EAAE;EACV,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}